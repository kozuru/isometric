function draw(){var n=Array.from({length:20},(n,t)=>"class"+t);$(".wrap .grid").addClass("slide");setTimeout(function(){$(".grid .cell").removeClass(n);$(".wrap .grid").removeClass("slide");$(".grid .cell").each(function(){$(this).addClass("class"+Math.floor(Math.random()*11+1))});$(".grid .cell").each(function(){$(this).get(0).style.setProperty("--size",Math.floor(Math.random()*2+1));$(this).get(0).style.setProperty("--height",Math.floor(Math.random()*50)*4+"px");$(this).get(0).style.setProperty("--angle",Math.floor(Math.random()*4)*90+"deg");$(this).get(0).style.setProperty("--shift",(Math.floor(Math.random()*150)-50)*1.5+"px")})},1600)}gsap.registerPlugin(MotionPathPlugin);gsap.set(".green_car",{xPercent:-50,yPercent:-50,transformOrigin:"50% 55%"});gsap.from(".green_car",{motionPath:{path:"#path",align:"#path",autoRotate:!1},duration:5,delay:.5,repeat:-1,ease:"power1.inOut",immediateRender:!0});gsap.set(".bus",{xPercent:-50,yPercent:-50,transformOrigin:"50% 60%"});gsap.from(".bus",{motionPath:{path:"#path",align:"#path",autoRotate:!1},duration:5,delay:1.5,repeat:-1,ease:"power1.inOut",immediateRender:!0});gsap.set(".bike",{xPercent:-50,yPercent:-50,transformOrigin:"50% 65%"});gsap.from(".bike",{motionPath:{path:"#path",align:"#path",autoRotate:!1},duration:5,delay:2.5,repeat:-1,ease:"power1.inOut",immediateRender:!0});gsap.set(".drone",{xPercent:-50,yPercent:-50,transformOrigin:"50% 50%"});gsap.to(".drone",{motionPath:{path:"#drone_path",align:"#drone_path",autoRotate:!1},duration:5,delay:0,repeat:-1,ease:"power1.inOut",immediateRender:!0});$(function(){draw();$("body").on("click",function(){draw()})});setInterval(draw,9e3);bubbleColours=["#946EB5","#4F4791","#946EB5"];gsap.fromTo("#bubbleGroup > *",{x:"random(-100,100)",y:0,scale:"random(0.1, 2)",transformOrigin:"50% 50%"},{y:-1200,stagger:{repeatRefresh:!0,each:.2,repeat:-1},transformOrigin:"50% 50%",duration:"random(8,20)",ease:"power1.out",x:"random(-250, 200)"}).seek(1e3);gsap.to("#clouds > *",{x:"random(-200, 200)",duration:"random(10, 20)",ease:"none",repeat:-1,yoyo:!0,stagger:{each:.5,repeatRefresh:!0}}).seek(500);jQuery(function(n){function i(){winH=n(window).height();winW=n(window).width();mainH=winW<=736?winH*.55:winW<=950?winH*.7:winH;n("#top_main").height(mainH);topRatio=mainH/winW;topRatio<.596125?n("#top_main > .image").css({width:winW,height:winW*.596125}):n("#top_main > .image").css({width:mainH*1.6775,height:mainH});topRatio<.555555?n("body").addClass("js-imgWider"):n("body").removeClass("js-imgWider");var t=n(window).scrollTop();n("#top_main").length&&n("#top_main").each(function(){var r=(n(".image",this).height()-winH)/winH,i=t*r,u=n("#header").outerHeight();topRatio<.555555?t<mainH-u&&n(".image",this).css({transform:"translate(0%, -"+i+"px)","-webkit-transform":"translate3d(0%, -"+i+"px, 0)"}):n(".image",this).css({transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)"})})}i();n(window).on("load resize scroll",function(){i()});if(n(function(){var n=new t.TopMain("#top_main > .image")}),typeof t=="undefined")var t=function(){};n("html").addClass("fac-js-enabled");t.TopMain=function(n){this.initialize(n)};t.TopMain.AREA_WIDTH=6709;t.TopMain.AREA_HEIGHT=4e3;t.TopMain.prototype={self:null,target:null,trains:null,min_width:null,is_first:null,is_content_full:null,initialize:function(i){var r,u,f;this.self=n(this);this.target=n(i);r=n("<div><\/div>");u=r.clone().addClass("trains").appendTo(this.target);this.trains=new t.TopMain.Trains(u);f=r.clone().addClass("cars").appendTo(this.target);this.car=new t.TopMain.Car(f)}};t.TopMain.PathAnimationItem=function(n,t,i){this.initialize(n,t,i)};t.TopMain.PathAnimationItem.prototype={target:null,path:null,options:{speed:null,min_degree:null,max_degree:null,sprites:null,max:null,offset:[]},callbacks:{end:null},count:null,position:null,position_max:1e3,length:null,last_point:{x:0,y:0},timer:null,initialize:function(t,i,r){this.target=t;this.path=i;this.options=n.extend({},this.options,r);this.length=this.path.getTotalLength();this.options.sprites=this.options.sprites-1;this.options.max=this.options.max_degree-this.options.min_degree;this.callbacks={end:n.Callbacks()}},run:function(n){this.count=0;this.position=n!==void 0?-n:0;this.timer=window.requestAnimationFrame(this.animate.bind(this))},animate:function(){var i;if(this.position+=this.options.speed,this.position<0){window.requestAnimationFrame(this.animate.bind(this));return}if(parseInt(this.position/this.position_max,10)===1){window.cancelAnimationFrame(this.timer);this.callbacks.end.fire();return}this.count++;i=0;typeof this.options.offset=="function"&&(i=this.options.offset(this.position,this.position_max));this.position+=i;var n=this.path.getPointAtLength(this.position/this.position_max*this.length),f=n.x/t.TopMain.AREA_WIDTH*100,e=n.y/t.TopMain.AREA_HEIGHT*100,o=parseInt(n.y),s=Math.atan2(this.last_point.y-n.y,this.last_point.x-n.x),r=s*(180/Math.PI);r=(r+270)%360;var h=Math.min(Math.max(r,this.options.min_degree),this.options.max_degree)-this.options.min_degree,c=1-h/this.options.max,u=Math.round(c*this.options.sprites),l=u%10*-100,a=parseInt(u/10)*-100;this.last_point=n;this.target.css({left:f+"%",top:e+"%",zIndex:o,backgroundPosition:l+"% "+a+"%"});window.requestAnimationFrame(this.animate.bind(this))}};t.TopMain.Trains=function(n){this.initialize(n)};t.TopMain.Trains.Path=n('<svg><path class="st0" d="M-297.1,1645.9c0,0,1094.8,788.2,1429.2,1020.4c288.5,200.3,864.8,231.5,1210.1,113.8c356.8-121.6,761.8-299.6,4761.8-440.6,9761.8-480.6"/><\/svg>').find("path")[0];t.TopMain.Trains.prototype={target:null,front:null,middle:null,back:null,initialize:function(i){this.target=i;var r={speed:4.743,min_degree:60,max_degree:125,sprites:19,offset:this.offset.bind(this)},u=n("<div><\/div>").addClass("front").prependTo(this.target),f=n("<div><\/div>").addClass("middle").prependTo(this.target),e=n("<div><\/div>").addClass("back").prependTo(this.target);this.front=new t.TopMain.PathAnimationItem(u,t.TopMain.Trains.Path,r);this.middle=new t.TopMain.PathAnimationItem(f,t.TopMain.Trains.Path,r);this.back=new t.TopMain.PathAnimationItem(e,t.TopMain.Trains.Path,r);this.back.callbacks.end.add(this.start.bind(this));this.start(200)},start:function(n){var n=n||100;this.front.run(n);this.middle.run(n+30);this.back.run(n+30.7*2)},offset:function(n,t){var i=0,r=n/t;switch(!0){case r<.46:i=-.7;break;case r<.75:i=.6;break;default:i=0}return i}}});window.onload=function(){var n=.5,t=new TimelineMax({}),i;t.fromTo(["#frontWheel","#backWheel","#chakra"],n,{rotation:0,repeat:-1,transformOrigin:"50% 50%"},{rotation:360,repeat:-1,transformOrigin:"50% 50%",ease:Power0.easeNone},0);i=$("#lowerChains circle");t.to(i,n-.2,{x:-5,repeat:-1,ease:Power0.easeNone},0);i=$("#upperChains circle");t.to(i,n-.2,{x:5,repeat:-1,ease:Power0.easeNone},0);t.fromTo("#upperLeft",n,{rotation:0,repeat:-1,yoyo:!0,transformOrigin:"15% 15%"},{rotation:-50,repeat:-1,yoyo:!0,transformOrigin:"15% 15%",ease:Power0.easeNone},0).fromTo("#lowerLeftG",n,{y:0,x:0,rotation:0,repeat:-1,yoyo:!0,transformOrigin:"20% 20%"},{y:-69,x:44,rotation:20,repeat:-1,yoyo:!0,transformOrigin:"20% 20%",ease:Power0.easeNone},0);t.fromTo("#upperRight",n,{rotation:0,repeat:-1,yoyo:!0,transformOrigin:"15% 15%"},{rotation:50,repeat:-1,yoyo:!0,transformOrigin:"15% 15%",ease:Power0.easeNone},0).fromTo("#lowerRightG",n,{y:0,x:0,repeat:-1,rotation:0,yoyo:!0,transformOrigin:"20% 20%"},{y:67,x:-67,repeat:-1,rotation:-20,yoyo:!0,transformOrigin:"20% 20%",ease:Power0.easeNone},0);t.staggerFromTo(["#mindBody","#frontWheel","#backWheel","#cycleBody"],n+.4,{y:3,yoyo:!0,repeat:-1},{y:0,yoyo:!0,repeat:-1},0);t.fromTo("#face_2_",n+.6,{rotation:0,yoyo:!0,repeat:-1},{rotation:2,yoyo:!0,repeat:-1},0);t.to(["#innerShoe","#outerShoe"],n,{yoyo:!0,repeat:-1,rotation:-20,transformOrigin:"10% 10%",ease:Power0.easeNone},0);t.to("#roadMarks",n,{x:-40,repeat:-1,ease:Power0.easeNone},0).fromTo("#roadMarks",n,{opacity:.2},{opacity:.7},0)}
